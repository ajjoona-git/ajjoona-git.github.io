{% assign raw_url = url | replace: 'http:', '' | replace: 'https:', '' | replace: '//', '' %}
{% assign raw_image = image | replace: 'http:', '' | replace: 'https:', '' | replace: '//', '' %}

{% assign safe_url = raw_url | prepend: 'https://' %}
{% assign safe_image = raw_image | prepend: 'https://' %}

<div class="jekyll-linkpreview-wrapper">
  <div class="jekyll-linkpreview-wrapper-inner">
    <div class="jekyll-linkpreview-content">
      <div class="jekyll-linkpreview-body">
        <div class="jekyll-linkpreview-title">
          <a href="{{ safe_url }}" target="_blank">{{ title }}</a>
        </div>
        {% if description %}
          <div class="jekyll-linkpreview-description">{{ description }}</div>
        {% endif %}
        <div class="jekyll-linkpreview-footer">
          <a href="{{ safe_url }}" target="_blank">{{ domain }}</a>
        </div>
      </div>
    </div>
  </div>
  {% if image %}
    <div class="jekyll-linkpreview-image" style="background-image: url('{{ safe_image }}');"></div>
  {% endif %}
</div>