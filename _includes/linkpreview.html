{% assign safe_url = url %}
{% assign safe_image = image %}

{% unless safe_url contains 'http://' or safe_url contains 'https://' %}
  {% if safe_url contains '//' %}
    {% assign safe_url = safe_url | replace: '//', 'https://' %}
  {% endif %}
{% endunless %}

{% unless safe_image contains 'http://' or safe_image contains 'https://' %}
  {% if safe_image contains '//' %}
    {% assign safe_image = safe_image | replace: '//', 'https://' %}
  {% endif %}
{% endunless %}

<div class="jekyll-linkpreview-wrapper">
  <div class="jekyll-linkpreview-wrapper-inner">
    <div class="jekyll-linkpreview-content">
      <div class="jekyll-linkpreview-body">
        <div class="jekyll-linkpreview-title">
          <a href="{{ safe_url }}" target="_blank">{{ title }}</a>
        </div>
        {% if description %}
          <div class="jekyll-linkpreview-description">{{ description }}</div>
        {% endif %}
        <div class="jekyll-linkpreview-footer">
          <a href="{{ safe_url }}" target="_blank">{{ domain }}</a>
        </div>
      </div>
    </div>
  </div>
  {% if safe_image %}
    <div class="jekyll-linkpreview-image" style="background-image: url('{{ safe_image }}');"></div>
  {% endif %}
</div>